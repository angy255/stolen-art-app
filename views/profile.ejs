<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Art Journal</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Jersey+10&family=Limelight&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/66a5eab7b2.js" crossorigin="anonymous"></script>
    <link rel="icon" type="image/x-icon" href="/img/thief1.svg">
    <link rel="stylesheet" href="style.css">
<style>
  body{
  background-image: url(img/dark-thief1.jpg);
  background-repeat: no-repeat;
  background-size: cover;
  }
  .journal-entry {
    background-color: rgb(252, 216, 13);
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 15px;
    list-style: none;
  }
  .journal-entry img {
    max-width: 300px;
    height: auto;
    border-radius: 5px;
    margin: 10px 0;
  }
  .journal-entry h4 {
    margin: 5px 0;
    color: #446a4d;
  }
  .journal-entry p {
    margin: 5px 0;
    color: black;
  }
  .edit-form {
    display: none;
    background-color: white;
    padding: 10px;
    border-radius: 5px;
    margin-top: 10px;
  }
  .edit-form input, .edit-form textarea {
    width: 100%;
    margin: 5px 0;
    padding: 5px;
    border: 2px solid black;
    border-radius: 4px;
  }
  .edit-form textarea {
    min-height: 80px;
  }
  .btn-edit, .btn-delete, .btn-save, .btn-cancel {
    cursor: pointer;
    padding: 5px 10px;
    margin: 5px;
    border: 2px solid black;
    border-radius: 4px;
    background-color: white;
    font-family: "Limelight", sans-serif;
  }
  .btn-edit:hover, .btn-save:hover {
    background-color: rgb(0, 151, 226);
    color: white;
  }
  .btn-delete:hover, .btn-cancel:hover {
    background-color: #a81036;
    color: white;
  }
</style>

</head>
<body>
<div class="container">

    <div class="page-header text-center">
        <h1> ✨ My Art Journal ✨ </h1>
        <a href="/logout" class="btn-default btn-sm">Logout</a>
    </div>

    <div class="row">

        <!-- USER INFORMATION (HIDDEN) -->
        <div class="redo" style="display: none;">
            <% if (user.local.email) { %>
                <p>
                    <strong>id</strong>: <%= user._id %><br>
                    <strong>email</strong>: <%= user.local.email %><br>
                    <strong>password</strong>: <%= user.local.password %>
                </p>
            <% } %>
        </div>

        <!-- JOURNAL ENTRIES -->
        <div class="redo">
          <h3><i class="fa-solid fa-book"></i> Journal Entries</h3>
          <ul class="messages">
          <% for(let i=0; i<messages.length; i++) {%>
            <li class="journal-entry">
              <h4><%= messages[i].date || 'No date' %></h4>
              <p><strong>Art Piece:</strong> <%= messages[i].artPiece %></p>
              <p><strong>Museum:</strong> <span class="museum-name"><%= messages[i].museum %></span></p>
              <% if (messages[i].imageUrl && messages[i].imageUrl.trim() !== '') { %>
                <img src="<%= messages[i].imageUrl %>" alt="<%= messages[i].artPiece %>" onerror="this.style.display='none'">
              <% } %>
              <p><strong>Notes:</strong> <span class="entry-notes"><%= messages[i].notes %></span></p>
              <p style="display: none;" class="user-email"><%= messages[i].name %></p>
              <p style="display: none;" class="art-piece"><%= messages[i].artPiece %></p>
              <p style="display: none;" class="image-url"><%= messages[i].imageUrl %></p>
              <p style="display: none;" class="entry-date"><%= messages[i].date %></p>
              
              <button class="btn-edit">Edit</button>
              <button class="btn-delete">Delete</button>

              <!-- Edit Form (Hidden by default) -->
              <div class="edit-form">
                <input type="text" class="edit-museum" value="<%= messages[i].museum %>" placeholder="Museum Name">
                <input type="text" class="edit-artpiece" value="<%= messages[i].artPiece %>" placeholder="Art Piece Name">
                <input type="text" class="edit-imageurl" value="<%= messages[i].imageUrl %>" placeholder="Image URL">
                <textarea class="edit-notes" placeholder="Your notes"><%= messages[i].notes %></textarea>
                <button class="btn-save">Save</button>
                <button class="btn-cancel">Cancel</button>
              </div>
            </li>
          <% } %>
          </ul>

          <!-- ADD NEW ENTRY FORM -->
          <h2 class="addMessage">Add an entry</h2>
        <% if (user.local.email) { %>
          <form action="/messages" method="POST">
            <input type="hidden" value="<%= user.local.email %>" name="name">
            <input type="text" placeholder="museum name" name="museum" class="messageInput" required>
            <input type="text" placeholder="art piece name" name="artPiece" class="messageInput" required>
            <input type="text" placeholder="image URL" name="imageUrl" class="messageInput">
            <textarea placeholder="notes on this piece..." name="notes" class="messageInput" style="width: 100%; min-height: 80px; margin-right: 30px" required></textarea>
            <button type="submit" class="profileBtn">Submit</button>
          </form>
        </div>
        <% } %>

</div>

<div class="addtlPgs">
<form action="/gallery" method="GET">
  <button type="submit" class="gallery">Gallery</button>
</form>

<form action="/news" method="GET">
  <button type="submit" class="news">Recent News</button>
</form>

<form action="/" method="GET">
  <button type="submit" class="home">Home</button>
</form>

</div>

<script src="main.js"></script>

</body>
</html>